<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SHMEK DYNASTY</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --primary: #1b5e20;
            --primary-light: #4caf50;
            --accent: #ffd54f;
            --dark: #121212;
            --dark-800: #181818;
            --dark-600: #222222;
            --light: #f5f5f5;
            --success: #43a047;
            --border-radius: 12px;
            --font: 'Exo 2', sans-serif;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: var(--font);
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: var(--tg-theme-bg-color, var(--dark));
            color: var(--tg-theme-text-color, var(--light));
            min-height: 100vh;
            padding: 16px;
            margin: 0;
        }
        
        .game-header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .game-logo {
            font-size: 2rem;
            font-weight: 800;
            margin: 8px 0;
            background: linear-gradient(45deg, var(--accent), #ff8f00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-transform: uppercase;
        }
        
        .game-tagline {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 12px;
        }
        
        .resources {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-bottom: 20px;
            background: var(--tg-theme-secondary-bg-color, var(--dark-800));
            padding: 12px;
            border-radius: var(--border-radius);
        }
        
        .resource {
            text-align: center;
            padding: 8px;
            background: var(--dark-600);
            border-radius: 8px;
        }
        
        .resource-icon {
            font-size: 1.2rem;
            margin-bottom: 4px;
        }
        
        .resource-value {
            font-size: 1rem;
            font-weight: 600;
        }
        
        .resource-label {
            font-size: 0.7rem;
            opacity: 0.7;
        }
        
        .grow-progress {
            background: var(--dark-600);
            padding: 12px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .progress-bar {
            height: 10px;
            background: var(--dark);
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            width: 0%;
            transition: width 0.3s;
        }
        
        .game-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        
        .action-btn {
            padding: 12px 0;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            text-align: center;
            color: white;
        }
        
        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .btn-grow {
            background: var(--primary);
        }
        
        .btn-harvest {
            background: #ffc107;
            color: black;
        }
        
        .btn-sell {
            background: #03a9f4;
        }
        
        .btn-special {
            background: #9c27b0;
        }
        
        .log-area {
            margin-top: 20px;
            padding: 12px;
            background: var(--dark-800);
            border-radius: var(--border-radius);
            max-height: 150px;
            overflow-y: auto;
        }
        
        .log-entry {
            padding: 8px 4px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-size: 0.85rem;
            display: flex;
            align-items: center;
        }
        
        .log-icon {
            margin-right: 8px;
        }
        
        .log-message {
            flex: 1;
        }
    </style>
</head>
<body>
    <div class="game-header">
        <h1 class="game-logo">SHMEK DYNASTY</h1>
        <div class="game-tagline">Build Your Cannabis Empire</div>
    </div>
    
    <div class="resources">
        <div class="resource">
            <div class="resource-icon">üí∞</div>
            <div class="resource-value"><span id="coins">1000</span></div>
            <div class="resource-label">Coins</div>
        </div>
        <div class="resource">
            <div class="resource-icon">üåø</div>
            <div class="resource-value"><span id="weed">0</span></div>
            <div class="resource-label">Weed</div>
        </div>
        <div class="resource">
            <div class="resource-icon">‚öóÔ∏è</div>
            <div class="resource-value"><span id="research">0</span></div>
            <div class="resource-label">Research</div>
        </div>
        <div class="resource">
            <div class="resource-icon">‚ú®</div>
            <div class="resource-value"><span id="level">1</span></div>
            <div class="resource-label">Level</div>
        </div>
    </div>
    
    <div class="grow-progress">
        <div class="progress-header">
            <div>Growing Progress</div>
            <div id="progress-value">0%</div>
        </div>
        <div class="progress-bar">
            <div class="progress-bar-fill" id="progress-bar"></div>
        </div>
    </div>
    
    <div class="game-actions">
        <button class="action-btn btn-grow" id="btn-grow">Grow üå±</button>
        <button class="action-btn btn-harvest" id="btn-harvest" disabled>Harvest ‚úÇÔ∏è</button>
        <button class="action-btn btn-sell" id="btn-sell" disabled>Sell üí∞</button>
        <button class="action-btn btn-special" id="btn-special">Special ‚ú®</button>
    </div>
    
    <div class="log-area" id="log-area">
        <div class="log-entry">
            <div class="log-icon">üì±</div>
            <div class="log-message">Welcome to SHMEK DYNASTY!</div>
        </div>
    </div>
    
    <script>
        // –ü–æ–ª—É—á–∞–µ–º WebApp Telegram, –µ—Å–ª–∏ –æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω
        const tg = window.Telegram?.WebApp;
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
        let coins = 1000;
        let weed = 0;
        let research = 0;
        let level = 1;
        let growProgress = 0;
        let isHarvestReady = false;
        let hasInventory = false;
        
        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const coinsEl = document.getElementById('coins');
        const weedEl = document.getElementById('weed');
        const researchEl = document.getElementById('research');
        const levelEl = document.getElementById('level');
        const progressBarEl = document.getElementById('progress-bar');
        const progressValueEl = document.getElementById('progress-value');
        const btnGrow = document.getElementById('btn-grow');
        const btnHarvest = document.getElementById('btn-harvest');
        const btnSell = document.getElementById('btn-sell');
        const btnSpecial = document.getElementById('btn-special');
        const logArea = document.getElementById('log-area');
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º Telegram API, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ
            if (tg) {
                try {
                    tg.ready();
                    tg.expand();
                } catch (e) {
                    console.log('Telegram API error:', e);
                }
            }
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            btnGrow.addEventListener('click', grow);
            btnHarvest.addEventListener('click', harvest);
            btnSell.addEventListener('click', sell);
            btnSpecial.addEventListener('click', special);
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ª–æ–≥
            addLogMessage('Game started!', 'üéÆ');
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            coinsEl.textContent = coins;
            weedEl.textContent = weed;
            researchEl.textContent = research;
            levelEl.textContent = level;
            
            const progressPercent = Math.floor(growProgress * 100);
            progressBarEl.style.width = `${progressPercent}%`;
            progressValueEl.textContent = `${progressPercent}%`;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏
            btnGrow.disabled = growProgress >= 1;
            btnHarvest.disabled = growProgress < 1 || isHarvestReady;
            btnSell.disabled = !isHarvestReady || !hasInventory;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –≤—ã—Ä–∞—â–∏–≤–∞–Ω–∏—è
        function grow() {
            if (growProgress < 1) {
                growProgress += 0.2;
                if (growProgress > 1) growProgress = 1;
                
                updateUI();
                
                if (growProgress < 1) {
                    addLogMessage('Growing plants...', 'üå±');
                } else {
                    addLogMessage('Plants are ready to harvest!', 'üåø');
                }
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è —Å–±–æ—Ä–∞ —É—Ä–æ–∂–∞—è
        function harvest() {
            if (growProgress >= 1 && !isHarvestReady) {
                growProgress = 0;
                isHarvestReady = true;
                hasInventory = true;
                
                updateUI();
                addLogMessage('Harvested some quality weed!', '‚úÇÔ∏è');
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–¥–∞–∂–∏
        function sell() {
            if (isHarvestReady && hasInventory) {
                const profit = 100 + Math.floor(Math.random() * 50);
                coins += profit;
                weed += 10;
                isHarvestReady = false;
                hasInventory = false;
                
                updateUI();
                addLogMessage(`Sold batch for ${profit} coins!`, 'üí∞');
                
                // –£—Ä–æ–≤–µ–Ω—å –ø–æ–≤—ã—à–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 1000 –º–æ–Ω–µ—Ç
                if (coins >= level * 1000 && level < 10) {
                    level++;
                    addLogMessage(`Level up! You are now level ${level}`, 'üéñÔ∏è');
                }
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
        function special() {
            const researchPoints = 5 + Math.floor(Math.random() * 5);
            research += researchPoints;
            
            updateUI();
            addLogMessage(`Gained ${researchPoints} research points`, '‚ú®');
        }
        
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ª–æ–≥
        function addLogMessage(message, icon = 'üìù') {
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            
            const logIcon = document.createElement('div');
            logIcon.className = 'log-icon';
            logIcon.textContent = icon;
            
            const logMessage = document.createElement('div');
            logMessage.className = 'log-message';
            logMessage.textContent = message;
            
            logEntry.appendChild(logIcon);
            logEntry.appendChild(logMessage);
            
            logArea.insertBefore(logEntry, logArea.firstChild);
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
            if (logArea.children.length > 10) {
                logArea.removeChild(logArea.lastChild);
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∏–≥—Ä—É
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
